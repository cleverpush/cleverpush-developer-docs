<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta name="generator" content="Hugo 0.48" />
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> JavaScript SDK </title>

  
  
  
  
  
  

  

  <meta name="author" content="CleverPush">


  <meta property="og:title" content="JavaScript SDK" />
<meta property="og:description" content="We provide several JavaScript methods to make the integration into your website even easier.
Calls to the SDK are all made via an array-like push method. This ensures that also calls which are made before the Script even loads are added to a queue.
Please make sure that your personal CleverPush code is implemented on every site (&lt;script src=&quot;https://static.cleverpush.com/channel/XXXXXX/loader.js&quot; async&gt;&lt;/script&gt;).
Example:
CleverPush = window.CleverPush || []; CleverPush.push([&#39;triggerOptIn&#39;]);  Methods triggerOptIn Triggers the opt-in dialog." />
<meta property="og:type" content="article" />
<meta property="og:url" content="/sdks/javascript/" /><meta property="article:published_time" content="2017-04-10T16:43:08&#43;01:00"/>
<meta property="article:modified_time" content="2017-04-10T16:43:08&#43;01:00"/>
  




  
  
  
  
  

  <link rel="canonical" href="/sdks/javascript/">  

  <link rel="shortcut icon" type="image/png" href="https://static.cleverpush.com/app/images/favicon.png">


  <link href="/css/font.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.legenda.css" rel="stylesheet" type="text/css">
  <link href="/css/highlight.css" rel="stylesheet" type="text/css">
  <link href="/css/master.css" rel="stylesheet" type="text/css">
  <link href="/css/kube.demo.css" rel="stylesheet" type="text/css">
  <link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">

 <link href="/css/custom.css" rel="stylesheet" type="text/css">

  <script src="/js/jquery-2.1.4.min.js" type="text/javascript">
  </script>

  <script type="text/javascript" src="/js/tocbot.min.js"></script>
</head>


<body class="page-kube">
  <header> <div class="show-sm">
    <div id="nav-toggle-box">
        <div id="nav-toggle-brand">
            <a href="/">
                <img src="https://static.cleverpush.com/app/images/logo/dark.svg" width="200" />
            </a>
        </div>
        <a data-component="toggleme" data-target="#top" href="#" id="nav-toggle"><i class="kube-menu"></i></a>
    </div>
</div>
<div class="hide-sm" id="top">
    <div id="top-brand">
        <a href="/" title="home">
            <img src="https://static.cleverpush.com/app/images/logo/dark.svg" width="200" />
        </a>
    </div>
    <nav id="top-nav-main">
        <ul>
            
            
            <li><a href="https://api.cleverpush.com" >API Reference</a>
            </li>
            
            <li><a href="/sdks/" >SDK Docs</a>
            </li>
            
        </ul>
    </nav>
    <nav id="top-nav-extra">
        <ul>
            
        </ul>
    </nav>
</div>
 </header>
  <main>
  <div id="main">
    <div id="hero">
      <h1> JavaScript SDK </h1>
      <p class="hero-lead">
           .
      </p>

    </div> 
    <div id="kube-component" class="content">
    
<nav id="contents">
    <ol class="js-toc">
    </ol>
</nav>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded",
function(){
tocbot.init({

tocSelector: '.js-toc',

contentSelector: '.content',

headingSelector: 'h3'
})
}
);
</script>



    

<p>We provide several JavaScript methods to make the integration into your website even easier.</p>

<p>Calls to the SDK are all made via an array-like push method. This ensures that also calls which are made before the Script even loads are added to a queue.</p>

<p>Please make sure that your personal CleverPush code is implemented on every site (<code>&lt;script src=&quot;https://static.cleverpush.com/channel/XXXXXX/loader.js&quot; async&gt;&lt;/script&gt;</code>).</p>

<p>Example:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;triggerOptIn&#39;</span>]);
</code></pre></div>

<h3 id="methods">Methods</h3>

<h4 id="code-triggeroptin-code"><code>triggerOptIn</code></h4>

<p>Triggers the opt-in dialog.
The appearance of the dialog and timing settings can be changed in your CleverPush account under <code>Channels / Select channel / Settings / Opt-In</code>.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;triggerOptIn&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">subscriptionId</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>);
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;successfully subscribed with id&#39;</span>, <span style="color:#a6e22e">subscriptionId</span>);
    }
}]);
</code></pre></div>

<h4 id="code-subscribe-code"><code>subscribe</code></h4>

<p>Forces a subscription and shows the opt-in dialog immediately, if the user is not subscribed, yet. Callback is required.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;subscribe&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">subscriptionId</span>) {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#a6e22e">err</span>);
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;successfully subscribed with id&#39;</span>, <span style="color:#a6e22e">subscriptionId</span>);
    }
}]);
</code></pre></div>

<h4 id="code-tagsubscription-code"><code>tagSubscription</code></h4>

<p>Tags an existing subscription.
You can also find your personal tagging codes in your CleverPush account under <code>Channels / Select channel / Settings / Tags</code>.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;tagSubscription&#39;</span>, <span style="color:#e6db74">&#39;INSERT_TAG_ID&#39;</span>]);
</code></pre></div>

<h4 id="code-untagsubscription-code"><code>untagSubscription</code></h4>

<p>Untags an existing subscription.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;untagSubscription&#39;</span>, <span style="color:#e6db74">&#39;INSERT_TAG_ID&#39;</span>]);
</code></pre></div>

<h4 id="code-settopics-code"><code>setTopics</code></h4>

<p>Programmatically sets the user&rsquo;s topics. This is not recommended, because tags should be used for automatic segmetation. Topics should only be managed by the user itself (via the notification bell panel, opt-in or content widget).
This method automatically waits for an active subscription to be available before being executed.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;setTopics&#39;</span>, [<span style="color:#e6db74">&#39;TOPIC_ID_1&#39;</span>, <span style="color:#e6db74">&#39;TOPIC_ID_2&#39;</span>, <span style="color:#e6db74">&#39;...&#39;</span>]]);
</code></pre></div>

<h4 id="code-gettopics-code"><code>getTopics</code></h4>

<p>Get a user&rsquo;s subscribed topics.
This method automatically waits for an active subscription to be available before being executed.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;getTopics&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">topics</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">topics</span>);
}]);
</code></pre></div>

<h4 id="code-setattribute-code"><code>setAttribute</code></h4>

<p>Set&rsquo;s a custom subscription attribute. The attribute needs to be created in the channel settings first. Call this method with the attribute&rsquo;s ID and the desired value afterwards.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;setAttribute&#39;</span>, <span style="color:#e6db74">&#39;ATTRIBUTE_ID&#39;</span>, <span style="color:#e6db74">&#39;VALUE&#39;</span>]);
</code></pre></div>

<h4 id="code-issubscribed-code"><code>isSubscribed</code></h4>

<p>Checks if the user is subscribed to push notifications.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;isSubscribed&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">result</span>) {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;isSubscribed result&#39;</span>, <span style="color:#a6e22e">result</span>); <span style="color:#75715e">// true or false
</span><span style="color:#75715e"></span>}]);
</code></pre></div>

<h4 id="code-unsubscribe-code"><code>unsubscribe</code></h4>

<p>Unsubscribes a subscribed user.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;unsubscribe&#39;</span>]);
</code></pre></div>

<h4 id="code-triggerfollowupevent-code"><code>triggerFollowUpEvent</code></h4>

<p>Triggers a follow-up campaign event.
You can also find the full event code in your CleverPush account under <code>Channels / Select channel / Follow-up campaigns</code>.
Insert the desired follow-up campaign ID and the event name.
The last argument are the event&rsquo;s parameters, which are completely optional. You can specify any parameters and use them in your follow-up notification templates.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">=</span> window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> [];
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">push</span>([<span style="color:#e6db74">&#39;triggerFollowUpEvent&#39;</span>, <span style="color:#e6db74">&#39;INSERT_FOLLOW_UP_CAMPAIGN_ID&#39;</span>, <span style="color:#e6db74">&#39;EVENT_NAME&#39;</span>, { <span style="color:#a6e22e">productAmount</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">2500.00</span>, <span style="color:#a6e22e">productName</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;iMac&#39;</span> }]);
</code></pre></div>

<p><br/></p>

<h3 id="initialization-event">Initialization event</h3>

<p>You can listen for the global initialization event.
This is very useful if you want to check if the current browser support Web Push notifications and then show a button to manually trigger the opt-in dialog.</p>

<p>Will fail if:
* Browser does not support push notifications
* There is no connection to our API available
* SDK was already initialized</p>

<p>Always make sure to insert this BEFORE your personal CleverPush loader code (<code>&lt;script src=&quot;https://static.cleverpush.com/channel/XXXXXX/loader.js&quot; async&gt;&lt;/script&gt;</code>). If this is not possible, you need to check, if CleverPush was already initialized (see the code below).</p>

<p>Example:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">showPushOptIn</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>() {
    document.<span style="color:#a6e22e">getElementById</span>(<span style="color:#e6db74">&#39;#cleverpush-button&#39;</span>).<span style="color:#a6e22e">style</span>.<span style="color:#a6e22e">display</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;block&#39;</span>;
}

<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>window.<span style="color:#a6e22e">CleverPush</span> <span style="color:#f92672">||</span> <span style="color:#f92672">!</span>window.<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">initialized</span>) {
    window.<span style="color:#a6e22e">cleverPushInitCallback</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">err</span>) {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
            <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Init callback error:&#39;</span>, <span style="color:#a6e22e">err</span>);
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#a6e22e">showPushOptIn</span>();
        }
    };
} <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">showPushOptIn</span>();
}
</code></pre></div>

<h3 id="subscription-events">Subscription Events</h3>

<p>Several subscription events can be listened for with one of the following methods (can only be called after successful initialization, see above):</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">on</span>(<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">callback</span>)
<span style="color:#a6e22e">CleverPush</span>.<span style="color:#a6e22e">once</span>(<span style="color:#a6e22e">event</span>, <span style="color:#a6e22e">callback</span>)
</code></pre></div>

<p><code>event</code> can be:</p>

<ul>
<li>&lsquo;SUBSCRIBED&rsquo; (after successful opt-in)</li>
<li>&lsquo;UNSUBSCRIBED&rsquo; (after successful opt-out)</li>
</ul>

<p></section></p>

<p><section></p>


    
    </div>
    </div>
</main>
  <footer> <footer id="footer">
    <nav>
        <ul>
            <li><span></span></li>
            <li>
                <a href="https://cleverpush.com/imprint/" target="_blank">Imprint</a>
            </li>
            <li>
                <a href="https://cleverpush.com/privacy" target="_blank">Privacy policy</a>
            </li>
            <li>
                <a href="https://cleverpush.com/terms" target="_blank">Terms of service</a>
            </li>
        </ul>
    </nav>
    <p>Copyright &copy; 2018 CleverPush.</p>
</footer>
 </footer>


  <script src="/js/kube.js" type="text/javascript">
  </script>
  <script src="/js/kube.legenda.js" type="text/javascript">
  </script>
  <script src="/js/master.js" type="text/javascript">
  </script>
</body>

</html>
